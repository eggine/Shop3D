<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>首页</title>

  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link href="css/carousel.css" rel="stylesheet">
  <link href="css/store.css" rel="stylesheet">
  <link href="css/font-awesome.min.css" rel="stylesheet">
  <link href="css/sendi_loading_wave.css" rel="stylesheet">

  <!-- -----------------------produce mode------------------------ 
  <link href="${path}/web/css/bootstrap.min.css" rel="stylesheet">
  <link href="${path}/web/css/carousel.css" rel="stylesheet">
  <link href="${path}/web/css/store.css" rel="stylesheet">
  <link href="${path}/web/css/sendi_loading_wave.css" rel="stylesheet">
  -->
  <script type="text/javascript">
  var urlParams = (function(url)
      {
        var result = new Object();
        var idx = url.lastIndexOf('?');
    
        if (idx > 0)
        {
          var params = url.substring(idx + 1).split('&');
          
          for (var i = 0; i < params.length; i++)
          {
            idx = params[i].indexOf('=');
            
            if (idx > 0)
            {
              result[params[i].substring(0, idx)] = params[i].substring(idx + 1);
            }
          }
        }
        
        return result;

      })(window.location.href);

      var itemid = urlParams['itemid'];
  </script>

  <script src="js/jquery.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  
  <script type="text/javascript"  src="js/sendi-jquery-loading-1.0.js"></script>
  <!-- -------------------------------produce mode--------------------------------------------- -->
  <!--<script src="${path}/web/js/jquery.min.js"></script>
<script src="${path}/web/js/sendi-jquery-loading-1.0.js"></script>
<script src="${path}/web/js/bootstrap.min.js"></script>
<script type="text/javascript" src="${path}/web/js/CustomUtils.js"></script>
<script src="${path}/web/js/ImgLoadAlgorithm.js"></script>
<script src="${path}/web/js/renderPanel.js"></script>
<script type="text/javascript"  src="${path}/web/js/slide-nav.js"></script>
<script type="text/javascript"  src="${path}/web/js/imageloader.js"></script>
<script src="${path}/web/../../assets/js/ie10-viewport-bug-workaround.js"></script>
<script src="${path}/web/js/navmenu.js"></script>
<script src="${path}/web/js/custom.js"></script>
-->
<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>

<body style="overflow:hidden">


  <div class="full-viewer">
    <span>
      <div id="full-viewer-box" class="full-viewer-box">
        <!-- <img src="images/images/20.jpg">  
        <img src="images/images/21.jpg">  
        <img src="images/images/22.jpg">  
        <img src="images/images/23.jpg">  
        <img src="images/images/24.jpg">  
        <img src="images/images/25.jpg">  
        <img src="images/images/26.jpg"> -->
        </div>
    </span>
  </div>
  <span class="control-btn">
    <ul>

      <li>
        <div data-direction="left" class="direction-btn">
          <span> <i class="fa fa-angle-left  "></i>
          </span>
          <!-- <img src="images/left.png">--></div>
      </li>
      <li>
        <div data-direction="right" class="direction-btn">
          <span> <i class="fa fa-angle-right  "></i>
          </span>
          <!-- <img src="images/right.png">--></div>
      </li>
      <li>
        <div id="enlarge-pic" data-direction="zoomout" class="enlarge-btn" style="font-size:23px;">
          <span>
            <i class="fa fa-search-plus  "></i>
          </span>
          <!-- <img src="images/right.png">--></div>
      </li>
      <li>
        <div id="enlarge-pic" data-direction="zoomin" class="enlarge-btn" style="font-size:23px;">
          <span>
            <i class="fa fa-search-minus  "></i>
          </span>
          <!-- <img src="images/right.png">--></div>
      </li>
      <li class="clearfix"></li>
    </ul>
  </span>


<script src="../../assets/js/ie10-viewport-bug-workaround.js"></script>
<script src="js/navmenu.js"></script>
<script src="js/custom.js"></script>

<script type="text/javascript">

        var height = screen.availHeight;
        window.level = 1;
        $('.full-viewer span').css('height',height);
        $(document).ready(function(){
          
            var urls =['http://127.0.0.1:8080/3DStore/web/images/images/20.jpg','http://127.0.0.1:8080/3DStore/web/images/images/21.jpg','http://127.0.0.1:8080/3DStore/web/images/images/22.jpg','http://127.0.0.1:8080/3DStore/web/images/images/23.jpg','http://127.0.0.1:8080/3DStore/web/images/images/24.jpg','http://127.0.0.1:8080/3DStore/web/images/images/25.jpg','http://127.0.0.1:8080/3DStore/web/images/images/26.jpg','http://127.0.0.1:8080/3DStore/web/images/images/27.jpg'];

             

              

             var aImg = [];
             var imgcontainer = document.getElementById('full-viewer-box');
            //pre load


            for (var i = 0; i < urls.length; i++) {
                   
                (function(i) {
                      var oNewImg = new Image();
                      oNewImg.onload = function() {
                          oNewImg.onload = null;
                          var oImg = document.createElement('img');
                          oImg.src = this.src;
                          oImg.id = this.id;
                          oImg.style.display = 'none';
                          imgcontainer.appendChild(oImg);
                          aImg[urls[i]] = oImg;
                          if (++i == urls.length) onLoad();
                    };
                    oNewImg.src = urls[i];
               })(i);
           };

           function onLoad(){

                for (var i = 0; i < aImg.length; i++) {
                  if(!aImg[urls[i]]){

                         alert('图片加载错误');

                   }
                };

                aImg[urls[0]].style.display = 'block';

                
                $('.enlarge-btn').on('click',function(){
 
                     var zoom = $(this).attr('data-direction');

                     if(zoom == "zoomout"){
                         
                         level = level + 1;
                         if (level > 3) {
                               
                               level = 3;

                         };

                                 enlarge(level);

                        

                     }else if(zoom == "zoomin"){
                        
                         level = level - 1;
                         if(level < 1){

                              level = 1;
                         }

                              enlarge(level);
                          
                     }




                });

                $('.direction-btn').on('click',function(){
                      
                      defaultlevel();
                      var direction = $(this).attr('data-direction'); 

                      if('left' === direction){
                            
                           var urlNow = getDisplayImg();
                           if(urlNow != ''){
                               
                               console.debug(urlNow);

                               var num = urlToNum(urlNow);

                               var iNum = parseInt(num);

                               iNum = iNum -1;
                               console.debug('iNum:'+iNum);


                               if(iNum < 20 ){

                                     iNum = 27 ;

                               }

                              var newUrl = numToUrl(urlNow,iNum);
                              console.debug('newUrl:'+ newUrl);

                               $('#full-viewer-box img').css('display','none');

                               aImg[newUrl].style.display = 'block';



                           }
                                                      

                             
                      }else if('right' === direction){

                          var urlNow = getDisplayImg();
                          
                           if(urlNow != ''){
                               
                               console.debug(urlNow);

                               var num = urlToNum(urlNow);

                               var iNum = parseInt(num);

                               iNum = iNum + 1;
                               console.debug('iNum:'+iNum);


                               if(iNum > 27 ){

                                     iNum = 20 ;

                               }

                              var newUrl = numToUrl(urlNow,iNum);
                              console.debug('newUrl:'+ newUrl);

                               $('#full-viewer-box img').css('display','none');

                               aImg[newUrl].style.display = 'block';



                           }
                                        
                          



                      }

                });

            }




function enlarge(level){
    
        var $element = $("#full-viewer-box");
        $element.removeClass('enlarge-15x');
        $element.removeClass('enlarge-20x');
        $element.removeClass('enlarge-25x');

        if(level ==1){
           
           $element.addClass('enlarge-15x');

        }else if(level == 2){

          $element.addClass('enlarge-20x');

        }else{

           $element.addClass('enlarge-25x');

        }
     


}

function defaultlevel(){
  
        var $element = $("#full-viewer-box");
        $element.removeClass('enlarge-15x');
        $element.removeClass('enlarge-20x');
        $element.removeClass('enlarge-25x');

}



function getDisplayImg(){
   
      var imgs =  $('#full-viewer-box img');
      var url = '';

      for (var i = 0; i < imgs.length; i++) {

           if($(imgs[i]).css('display') == 'block'){

                 url = $(imgs[i]).attr('src');
                 break;

           }
              
                                       
      };   


     return url;
}




function urlToNum(url){

     var start =  url.lastIndexOf('/');
     var end  = url.lastIndexOf('.');

     var sNum = url.substring(start+1,end);

     return parseInt(sNum);
    

}

function numToUrl(urlTemplate,num){
    
     var start =  urlTemplate.lastIndexOf('/');
     var end  = urlTemplate.lastIndexOf('.');

     var startStr = urlTemplate.substring(0,start+1);
     var endStr = urlTemplate.substring(end,urlTemplate.length);
     
     return startStr + num + endStr;


     

}










        });



    </script>
</body>
</html>